<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Page</title>
    <script src="https://cdn.jsdelivr.net/npm/tailwindcss@2.0.0/dist/tailwind.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>


    <style>
        /* TailwindCSS for dark mode and customization */
        .verified {
            color: #3b82f6;
        }
    </style>
</head>
<body class="bg-gray-100">

    <!-- Profile Toolbar -->
    <div class="bg-white shadow-md p-4 flex items-center justify-between">
        <div class="flex items-center space-x-2">
            <button class="text-gray-600" onclick="history.back()">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 12H5"></path>
                </svg>
            </button>
            <span class="text-xl font-semibold text-gray-800">User Profile</span>
        </div>
        <button class="text-gray-600">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2h-5v2zM17 12h5v-2h-5v2zM17 4h5V2h-5v2zM2 4h5V2H2v2zm0 8h5v-2H2v2zm0 8h5v-2H2v2z"></path>
            </svg>
        </button>
    </div>

    <!-- Profile Info Section -->
    <div class="bg-white shadow-md p-6 mx-auto max-w-3xl mt-6 rounded-lg">
        <div class="flex justify-center">
            <!-- Profile Image -->
            <div class="relative">
                <img id="profileImage" src="https://via.placeholder.com/150" alt="Profile Image" class="w-32 h-32 rounded-full object-cover">
            </div>
        </div>

        <div class="text-center mt-4">
            <!-- User Name with Verified Check -->
            <div class="flex items-center justify-center">
                <h2 id="userName" class="text-2xl font-semibold text-gray-800">John Doe</h2>
                <span id="verifiedTick" class="ml-2 text-blue-500 hidden">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                </span>
            </div>
            <p id="userDescription" class="text-gray-600 mt-2">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed non risus. Suspendisse lectus tortor.</p>
        </div>

        <!-- Tab Navigation -->
        <div class="mt-6">
            <div class="flex border-b">
                <button id="servicesTab" class="px-4 py-2 text-lg font-semibold text-gray-700 border-b-2 border-transparent hover:text-blue-500 hover:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    Services
                </button>
                <button id="reviewsTab" class="px-4 py-2 text-lg font-semibold text-gray-700 border-b-2 border-transparent hover:text-blue-500 hover:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    Reviews
                </button>
            </div>
            
            <!-- Tab Content -->
            <div id="tabContent" class="mt-4">
                <!-- Services Tab Content -->
                <div id="servicesContent" class="hidden">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="servicesList">
                        <!-- Service list will be populated here -->
                    </div>
                </div>

                <!-- Reviews Tab Content -->
                <div id="reviewsContent" class="hidden">
                    <div class="space-y-4" id="reviewsList">
                        <!-- Reviews list will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Firebase configuration (replace with your actual config)
        const firebaseConfig = {
  apiKey: "AIzaSyCZL_PB0cQxVquwdxl-xeRWgtke3wl24TA",
  authDomain: "urbanweds-87457.firebaseapp.com",
  projectId: "urbanweds-87457",
  storageBucket: "urbanweds-87457.firebasestorage.app",
  messagingSenderId: "653498502188",
  appId: "1:653498502188:web:16ef4d25e9c6665fe29589",
  measurementId: "G-DS4029MMMZ"
};

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Get the user ID from the URL
        const urlParams = new URLSearchParams(window.location.search);
        const userId = urlParams.get('id');  // Example: www.example.com/profile?id=1789

        if (userId) {
            // Fetch user data from Firebase Realtime Database
            database.ref('users/' + userId).once('value').then(snapshot => {
                const userData = snapshot.val();

                if (userData) {
                    // Populate profile details
                    document.getElementById('userName').textContent = userData.name || 'No Name';
                    document.getElementById('userDescription').textContent = userData.description || 'No Description';
                    document.getElementById('profileImage').src = userData.profileImage || 'https://via.placeholder.com/150';

                    // Show verified tick if the user is verified
                    if (userData.isVerified) {
                        document.getElementById('verifiedTick').classList.remove('hidden');
                    }

                    // Fetch and display services for the user
                    database.ref('services').orderByChild('userId').equalTo(userId).once('value').then(serviceSnapshot => {
                        const servicesList = document.getElementById('servicesList');
                        servicesList.innerHTML = '';  // Clear any previous services
                        
                        serviceSnapshot.forEach(serviceChild => {
                            const serviceData = serviceChild.val();
                            const serviceItem = document.createElement('div');
                            serviceItem.classList.add('bg-white', 'shadow-md', 'rounded-lg', 'p-4');
                            serviceItem.innerHTML = `
                                <h3 class="text-xl font-semibold text-gray-800">${serviceData.name}</h3>
                                <p class="text-gray-600 mt-2">${serviceData.description}</p>
                                <button class="mt-4 bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600">
                                    Book Now
                                </button>
                            `;
                            servicesList.appendChild(serviceItem);
                        });
                    });

                    // Fetch and display reviews for the user
                    database.ref('reviews').orderByChild('userId').equalTo(userId).once('value').then(reviewSnapshot => {
                        const reviewsList = document.getElementById('reviewsList');
                        reviewsList.innerHTML = '';  // Clear any previous reviews
                        
                        reviewSnapshot.forEach(reviewChild => {
                            const reviewData = reviewChild.val();
                            const reviewItem = document.createElement('div');
                            reviewItem.classList.add('bg-white', 'shadow-md', 'rounded-lg', 'p-4');
                            reviewItem.innerHTML = `
                                <p class="text-gray-600">"${reviewData.text}"</p>
                                <span class="text-yellow-500">?????</span>
                            `;
                            reviewsList.appendChild(reviewItem);
                        });
                    });
                } else {
                    alert('User data not found.');
                }
            }).catch(error => {
                console.error("Error fetching user data: ", error);
            });
        }

        // JavaScript to handle tab switching
        const servicesTab = document.getElementById('servicesTab');
        const reviewsTab = document.getElementById('reviewsTab');
        const servicesContent = document.getElementById('servicesContent');
        const reviewsContent = document.getElementById('reviewsContent');

        servicesTab.addEventListener('click', () => {
            servicesContent.classList.remove('hidden');
            reviewsContent.classList.add('hidden');
            servicesTab.classList.add('border-blue-500', 'text-blue-500');
            reviewsTab.classList.remove('border-blue-500', 'text-blue-500');
        });

        reviewsTab.addEventListener('click', () => {
            reviewsContent.classList.remove('hidden');
            servicesContent.classList.add('hidden');
            reviewsTab.classList.add('border-blue-500', 'text-blue-500');
            servicesTab.classList.remove('border-blue-500', 'text-blue-500');
        });

        // Default tab on load (Services)
        servicesTab.click();
    </script>
</body>
</html>
